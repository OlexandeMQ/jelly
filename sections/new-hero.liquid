{{ 'new-hero.css' | asset_url | stylesheet_tag }}

<section class="new-hero relative overflow-hidden">
  <div class="new-hero__video-wrapper">
    {% if section.settings.video_url != blank %}
      <video
        class="new-hero__video"
        autoplay
        loop
        muted
        playsinline
      >
        <source src="{{ section.settings.video_url.sources[0].url }}" type="video/mp4">
      </video>
    {% endif %}
  </div>

  <div class="new-hero__overlay"></div>

  <div class="new-hero__content">
    {% render 'app-stars' %}
    <h1 class="new-hero__heading">{{ section.settings.heading }}</h1>
    <p class="new-hero__description">{{ section.settings.description }}</p>

    {% if section.settings.button_label != blank %}
      <div class="cta-button--wrapper">
        <a href="{{ section.settings.button_url }}" class="cta_button">
          <span>
            {{ section.settings.button_label }}
          </span>
          {% render 'chevron-right' %}
        </a>
      </div>
    {% endif %}
    {% if section.settings.checkmark_text != blank %}
      <div class="new-hero__checkmark">
        {% render 'checkmark-icon' %}
        <span class="new-hero__checkmark-text">
          {{ section.settings.checkmark_text }}
        </span>
      </div>
    {% endif %}
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof gsap === 'undefined') return;

    const hero = document.querySelector('.new-hero');
    if (!hero) return;

    const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });

    tl.from('.new-hero__video', {
      scale: 1.1,
      opacity: 0,
      duration: 1.2,
    })
      .from(
        '.new-hero__overlay',
        {
          opacity: 0,
          duration: 0.6,
        },
        '-=0.8'
      )
      .from(
        '.new-hero__content > *',
        {
          y: 30,
          opacity: 0,
          duration: 0.6,
          stagger: 0.12,
        },
        '-=0.4'
      );
  });
</script>

{% schema %}
{
  "name": "New hero",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Your Hero Heading"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Short description goes here."
    },
    {
      "type": "video",
      "id": "video_url",
      "label": "Video URL (.mp4 recommended)"
    },
    {
      "type": "inline_richtext",
      "id": "checkmark_text",
      "label": "Checkmark text",
      "default": "30-Day Money Back Guarantee"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button text",
      "default": "Shop Royal Jelly"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button link"
    }
  ],
  "presets": [
    {
      "name": "New Hero"
    }
  ]
}
{% endschema %}
