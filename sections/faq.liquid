{{ 'new-faq.css' |  asset_url |  stylesheet_tag }}

{% liquid
  assign heading = section.settings.heading
%}

<section class="faq">
  <div class="faq-wrapper">
    {% if heading %}
      <h2 class="faq-heading">
        {{ heading }}
      </h2>
    {% endif %}
    <div class="faq-grid">
      {% for block in section.blocks %}
        <div class="faq-item">
          <div class="faq-item__header">
            <span>
              {{ block.settings.question }}
            </span>

            {% render 'faq-icon' %}
          </div>
          <div class="faq-item__answer-wrapper">
            <div class="faq-item__answer">
              <p>
                {{ block.settings.answer }}
              </p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<script>
  (() => {
    document.addEventListener('DOMContentLoaded', () => {
      const faqItems = document.querySelectorAll('.faq-item');
      if (!faqItems.length) return;

      faqItems.forEach((item) => {
        item.addEventListener('click', () => {
          const isOpen = item.classList.contains('is-open');

          faqItems.forEach((faqItem) => faqItem.classList.remove('is-open'));

          if (!isOpen) {
            item.classList.add('is-open');
          }
        });
      });
    });
  })();
</script>

{% schema %}
{
  "name": "FAQ",
  "settings": [
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "Have any questions? We've got the answers."
    }
  ],
  "blocks": [
    {
      "type": "faq-item",
      "name": "Faq item",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "question",
          "label": "Question"
        },
        {
          "type": "inline_richtext",
          "id": "answer",
          "label": "Answer"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ"
    }
  ]
}
{% endschema %}
